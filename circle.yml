dependencies:
  pre:
    - "sudo apt-add-repository ppa:george-edison55/cmake-3.x -y"
    - "sudo apt-add-repository ppa:ubuntu-toolchain-r/test -y"
    - sudo apt-get update
    - sudo aptitude install -y g++-5
    - sudo apt-get install cmake libxml2-dev ninja-build
    - sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-5 20
    - sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-5 20
    - sudo update-alternatives --install /usr/bin/c++ c++ /usr/bin/cpp-5 20
    - cd xcbuild && make

test:
  override:
    - ./xcbuild/build/xcbuild -workspace 'iOS9Sampler.xcworkspace' -scheme 'iOS9Sampler'
      -sdk iphonesimulator -destination 'platform=iOS Simulator,name=iPhone 6,OS=latest'
      CODE_SIGNING_REQUIRED=NO CODE_SIGN_IDENTITY= PROVISIONING_PROFILE= build

